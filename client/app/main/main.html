<div ng-include="'components/navbar/navbar.html'"></div>
<div class="container">
    <table id="webcdn-peers" class="table table-bordered">
        <thead>
            <tr>
                <th>#</th>
                <th>Peer ID</th>
                <th>Networks Latency
                    <br/><code style="font-size:10px;">responseEnd-fetchStart</code></th>
                <th>Page load
                    <br/> <code style="font-size:10px;">loadEventEnd-responseEnd</code></th>
                <th>Navigation + Page Load
                    <br/><code style="font-size:10px;">loadEventEnd-navigationStart</code></th>
                <th>Resource 1</th>
                <th>Resource 2</th>
                <th>Resource 3</th>
                {{host.resources}}
            </tr>
        </thead>
        <tbody>
            <tr ng-repeat="host in hosts">
                <th scope="row">{{$index}}</th>
                <td><code>{{host.uuid}}</code></td>
                <td>{{host.performance.timing.responseEnd - host.performance.timing.fetchStart}} ms</td>
                <td>{{host.performance.timing.loadEventEnd - host.performance.timing.responseEnd}} ms</td>
                <td>{{host.performance.timing.loadEventEnd - host.performance.timing.navigationStart}} ms</td>
                <td>
                    <span ng-show="host.resource_timing[0]">
                        {{host.resource_timing[0].duration | number : 2}} ms
                        <code style="font-size:10px;">{{host.resource_timing[0].initiatorType}}</code>
                    </span>
                    <table class="table" ng-show="host.pc_connect_duration.length">
                        <thead>
                            <tr>
                                <th>P2P</th>
                                <th>Fetch</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>{{host.pc_connect_duration[0].duration | number : 2}}</td>
                                <td>{{host.fetch_duration[0].duration | number : 2}}</td>
                            </tr>
                        </tbody>
                    </table>
                </td>
                <td>
                    <span ng-show="host.resource_timing[1]">
                        {{host.resource_timing[1].duration | number : 2}} ms 
                        <code style="font-size:10px;">{{host.resource_timing[1].initiatorType}}</code>
                    </span>
                    <table class="table" ng-show="host.pc_connect_duration.length">
                        <thead>
                            <tr>
                                <th>P2P</th>
                                <th>Fetch</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>{{host.pc_connect_duration[1].duration | number : 2}}</td>
                                <td>{{host.fetch_duration[1].duration | number : 2}}</td>
                            </tr>
                        </tbody>
                    </table>
                </td>
                <td>
                    <span ng-show="host.resource_timing[2]">
                        {{host.resource_timing[2].duration | number : 2}} ms 
                        <code style="font-size:10px;">{{host.resource_timing[2].initiatorType}}</code>
                    </span>
                    <table class="table" ng-show="host.pc_connect_duration.length">
                        <thead>
                            <tr>
                                <th>P2P</th>
                                <th>Fetch</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>{{host.pc_connect_duration[2].duration | number : 2}}</td>
                                <td>{{host.fetch_duration[2].duration | number : 2}}</td>
                            </tr>
                        </tbody>
                    </table>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<footer class="footer">
    <div class="container">
        <p> WebCDN - A Content Distribution Network from web browsers using WebRTC |
            <a href="https://webcdn.michelberger.info" target="_blank">website</a> |
            <a href="https://github.com/pmichelberger/webcdn-mediator/issues" target="_blank">issues</a></p>
    </div>
</footer>
