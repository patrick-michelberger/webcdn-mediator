<div ng-include="'components/navbar/navbar.html'"></div>
<div class="container">
    <table id="webcdn-peers" class="table table-bordered">
        <thead>
            <tr>
                <th></th>
                <th>Peer ID</th>
                <th>Networks Latency
                    <br/><code style="font-size:10px;">responseEnd-fetchStart</code></th>
                <th>Page load
                    <br/> <code style="font-size:10px;">loadEventEnd-responseEnd</code></th>
                <!--<th>Navigation + Page Load
                    <br/><code style="font-size:10px;">loadEventEnd-navigationStart</code></th>-->
                <th>Resource 1</th>
                <th>Resource 2</th>
                <th>Resource 3</th>
                {{host.resources}}
            </tr>
        </thead>
        <tbody>
            <tr ng-repeat="host in hosts">
                <th scope="row"><button ng-click="deleteHost(host.uuid)"class="btn btn-danger">X</button></th>
                <td><code>{{host.uuid}}</code><p><span class="label label-default">Created: {{host.created | date:'medium'}} </span></p></td>
                <td>{{host.performance.timing.responseEnd - host.performance.timing.fetchStart}} ms</td>
                <td>{{host.performance.timing.loadEventEnd - host.performance.timing.responseEnd}} ms</td>
                <!--<td>{{host.performance.timing.loadEventEnd - host.performance.timing.navigationStart}} ms</td>-->
                <td>
                    <div ng-show="host.resource_timing[0]">
                        <h5>XHR</h5>
                        <ul class="list-group">
                            <li class="list-group-item">
                                <span class="badge">{{host.resource_timing[0].duration | number : 2}}</span> <code>load</code>
                            </li>
                        </ul>
                    </div>
                    <div ng-show="host.pc_connect_duration.length">
                        <h5>P2P</h5>
                        <ul class="list-group">
                            <li class="list-group-item">
                                <span class="badge">{{host.lookup_duration[0].duration | number: 2}}</span> <code>lookup</code>
                            </li>
                            <li class="list-group-item">
                                <span class="badge">{{host.pc_connect_duration[0].duration | number: 2}}</span> <code>connect</code>
                            </li>
                            <li class="list-group-item">
                                <span class="badge">{{host.fetch_duration[0].duration | number: 2}}</span> <code>fetch</code>
                            </li>
                            <hr/>
                            <li class="list-group-item">
                                <span class="badge">{{host.lookup_duration[0].duration + host.pc_connect_duration[0].duration + host.fetch_duration[0].duration | number: 2}}</span> <b>total</b>
                            </li>
                        </ul>
                    </div>
                    <div ng-show="host.sendImage_duration[0]">
                        <h5>_sendImage()</h5>
                        <ul class="list-group">
                            <li class="list-group-item">
                                <span class="badge">{{host.sendImage_duration[0].duration | number : 2}}</span> <code>sendImage</code>
                            </li>
                        </ul>
                    </div>
                </td>
                <td>
                    <div ng-show="host.resource_timing[1]">
                        <h5>XHR</h5>
                        <ul class="list-group">
                            <li class="list-group-item">
                                <span class="badge">{{host.resource_timing[1].duration | number : 2}}</span> <code>load</code>
                            </li>
                        </ul>
                    </div>
                    <div ng-show="host.pc_connect_duration.length">
                        <h5>P2P</h5>
                        <ul class="list-group">
                            <li class="list-group-item">
                                <span class="badge">{{host.lookup_duration[1].duration | number: 2}}</span> <code>lookup</code>
                            </li>
                            <li class="list-group-item">
                                <span class="badge">{{host.pc_connect_duration[1].duration | number: 2}}</span> <code>connect</code>
                            </li>
                            <li class="list-group-item">
                                <span class="badge">{{host.fetch_duration[1].duration | number: 2}}</span> <code>fetch</code>
                            </li>
                            <hr/>
                            <li class="list-group-item">
                                <span class="badge">{{host.lookup_duration[1].duration + host.pc_connect_duration[1].duration + host.fetch_duration[1].duration | number: 2}}</span> <b>total</b>
                            </li>
                        </ul>
                    </div>
                    <div ng-show="host.sendImage_duration[2]">
                        <h5>_sendImage()</h5>
                        <ul class="list-group">
                            <li class="list-group-item">
                                <span class="badge">{{host.sendImage_duration[2].duration | number : 2}}</span> <code>sendImage</code>
                            </li>
                        </ul>
                    </div>
                </td>
                <td>
                    <div ng-show="host.resource_timing[2]">
                        <h5>XHR</h5>
                        <ul class="list-group">
                            <li class="list-group-item">
                                <span class="badge">{{host.resource_timing[2].duration | number : 2}}</span> <code>load</code>
                            </li>
                        </ul>
                    </div>
                    <div ng-show="host.pc_connect_duration.length">
                        <h5>P2P</h5>
                        <ul class="list-group">
                            <li class="list-group-item">
                                <span class="badge">{{host.lookup_duration[2].duration | number: 2}}</span> <code>lookup</code>
                            </li>
                            <li class="list-group-item">
                                <span class="badge">{{host.pc_connect_duration[2].duration | number: 2}}</span> <code>connect</code>
                            </li>
                            <li class="list-group-item">
                                <span class="badge">{{host.fetch_duration[2].duration | number: 2}}</span> <code>fetch</code>
                            </li>
                            <hr/>
                            <li class="list-group-item">
                                <span class="badge">{{host.lookup_duration[2].duration + host.pc_connect_duration[2].duration + host.fetch_duration[2].duration | number: 2}}</span> <b>total</b>
                            </li>
                        </ul>
                    </div>
                    <div ng-show="host.sendImage_duration[2]">
                        <h5>_sendImage()</h5>
                        <ul class="list-group">
                            <li class="list-group-item">
                                <span class="badge">{{host.sendImage_duration[2].duration | number : 2}}</span> <code>sendImage</code>
                            </li>
                        </ul>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<footer class="footer">
    <div class="container">
        <p> WebCDN - A Content Distribution Network from web browsers using WebRTC |
            <a href="https://webcdn.michelberger.info" target="_blank">website</a> |
            <a href="https://github.com/pmichelberger/webcdn-mediator/issues" target="_blank">issues</a></p>
    </div>
</footer>
